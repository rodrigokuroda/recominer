<?xml version="1.0" encoding="UTF-8"?>
<job id="minerJob" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/jobXML_1_0.xsd" version="1.0">
    <flow id="minerFlow" next="cochangeFlow">
        <step id="gitPullStep" next="cvsanalyStep">
            <chunk item-count="1" checkpoint-policy="custom">
                <reader ref="gitPullReader" />
                <processor ref="gitPullProcessor" />
                <writer ref="gitPullWriter" />
                <checkpoint-algorithm ref="recominerCheckPoint" />
            </chunk>
        </step>

        <step id="cvsanalyStep" next="bichoStep" allow-start-if-complete="gitPullStep">
            <chunk item-count="1" checkpoint-policy="custom">
                <reader ref="cvsanalyReader" />
                <processor ref="cvsanalyProcessor" />
                <writer ref="cvsanalyWriter" />
                <checkpoint-algorithm ref="recominerCheckPoint" />
            </chunk>
        </step>
        
        <step id="bichoStep" next="aggregatorStep" allow-start-if-complete="cvsanalyStep">
            <chunk item-count="1" checkpoint-policy="custom">
                <reader ref="bichoReader" />
                <processor ref="bichoProcessor" />
                <writer ref="bichoWriter" />
                <checkpoint-algorithm ref="recominerCheckPoint" />
            </chunk>
        </step>


        <step id="aggregatorStep" allow-start-if-complete="bichoStep">
            <chunk item-count="1" checkpoint-policy="custom">
                <reader ref="aggregatorReader" />
                <processor ref="aggregatorProcessor" />
                <writer ref="aggregatorWriter" />
                <checkpoint-algorithm ref="recominerCheckPoint" />
            </chunk>
        </step>
        
    </flow>
    
    <flow id="cochangeFlow">
        <step id="cochangeIdentificationStep">
            <chunk item-count="1" checkpoint-policy="custom">
                <reader ref="cochangeIdentifierReader" />
                <processor ref="cochangeIdentifierProcessor" />
                <writer ref="cochangeIdentifierWriter" />
                <checkpoint-algorithm ref="recominerCheckPoint" />
            </chunk>
        </step>
        
    </flow>
</job>